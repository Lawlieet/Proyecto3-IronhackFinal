{"ast":null,"code":"var _jsxFileName = \"/home/juan/Escritorio/lunesfinal/Proyecto3-IronhackFinal/Proyecto Final/frontend/src/context.js\";\nimport React, { createContext, Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport AUTH_SERVICE from './services/auth';\nimport axios from 'axios';\nexport const MyContext = createContext();\n\nclass MyProvider extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      formServicio: {\n        description: '',\n        direction: '',\n        cedula: ''\n      },\n      formSignup: {\n        name: '',\n        email: '',\n        password: ''\n      },\n      formLogin: {\n        email: '',\n        password: ''\n      },\n      loggedUser: null,\n      isLogged: false\n    };\n\n    this.handleSignupInputServicio = e => {\n      const {\n        formServicio\n      } = this.state;\n      const {\n        name,\n        value\n      } = e.target;\n      formServicio[name] = value;\n      this.setState({\n        formServicio\n      });\n    };\n\n    this.handleSignupSubmitServicio = async e => {\n      e.preventDefault();\n      const form = this.state.formServicio;\n      console.log(form);\n      this.setState({\n        formServicio: {\n          description: '',\n          direction: '',\n          cedula: ''\n        }\n      });\n      return await AUTH_SERVICE.CREATE(form);\n    };\n\n    this.handleLogout = async () => {\n      await AUTH_SERVICE.LOGOUT();\n      this.props.history.push('/');\n      this.setState({\n        loggedUser: null,\n        isLogged: false\n      });\n    };\n\n    this.handleSignupInput = e => {\n      const {\n        formSignup\n      } = this.state;\n      const {\n        name,\n        value\n      } = e.target;\n      formSignup[name] = value;\n      this.setState({\n        formSignup\n      });\n    };\n\n    this.handleLoginInput = e => {\n      const {\n        formLogin\n      } = this.state;\n      const {\n        name,\n        value\n      } = e.target;\n      formLogin[name] = value;\n      this.setState({\n        formLogin\n      });\n    };\n\n    this.handleSignupSubmit = async e => {\n      e.preventDefault();\n      const form = this.state.formSignup;\n      this.setState({\n        formSignup: {\n          name: '',\n          email: '',\n          password: ''\n        }\n      });\n      return await AUTH_SERVICE.SIGNUP(form);\n    };\n\n    this.handleLoginSubmit = e => {\n      e.preventDefault();\n      const form = this.state.formLogin;\n      return AUTH_SERVICE.LOGIN(form).then(({\n        user\n      }) => {\n        this.setState({\n          loggedUser: user,\n          isLogged: true\n        });\n        return {\n          user,\n          msg: 'Registro Exitoso'\n        };\n      }).catch(err => {\n        this.setState({\n          loggedUser: null,\n          isLogged: false,\n          formLogin: {\n            email: '',\n            password: ''\n          }\n        });\n        return {\n          user: null,\n          msg: 'El usuario o contraseña son incorrectos'\n        };\n      }).finally(() => this.setState({\n        formLogin: {\n          email: '',\n          password: ''\n        }\n      }));\n    };\n  }\n\n  render() {\n    const {\n      state,\n      handleSignupInput,\n      handleSignupSubmit,\n      handleLoginInput,\n      handleLoginSubmit,\n      handleLogout,\n      handleSignupSubmitServicio,\n      handleSignupInputServicio\n    } = this;\n    return React.createElement(MyContext.Provider, {\n      value: {\n        state,\n        handleSignupInput,\n        handleSignupSubmit,\n        handleLoginInput,\n        handleLoginSubmit,\n        handleLogout,\n        handleSignupSubmitServicio,\n        handleSignupInputServicio\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, this.props.children);\n  }\n\n}\n\nexport default withRouter(MyProvider);","map":{"version":3,"sources":["/home/juan/Escritorio/lunesfinal/Proyecto3-IronhackFinal/Proyecto Final/frontend/src/context.js"],"names":["React","createContext","Component","withRouter","AUTH_SERVICE","axios","MyContext","MyProvider","state","formServicio","description","direction","cedula","formSignup","name","email","password","formLogin","loggedUser","isLogged","handleSignupInputServicio","e","value","target","setState","handleSignupSubmitServicio","preventDefault","form","console","log","CREATE","handleLogout","LOGOUT","props","history","push","handleSignupInput","handleLoginInput","handleSignupSubmit","SIGNUP","handleLoginSubmit","LOGIN","then","user","msg","catch","err","finally","render","children"],"mappings":"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","sourcesContent":["import React, { createContext, Component } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport AUTH_SERVICE from './services/auth'\nimport axios from 'axios'\nexport const MyContext = createContext()\n\nclass MyProvider extends Component {\n  state = {\n    formServicio:{\n      description:'',\n      direction:'',\n      cedula:''\n    }\n   ,\n    formSignup: {\n      name: '',\n      email: '',\n      password: ''\n    },\n    formLogin: {\n      email: '',\n      password: ''\n    },\n    loggedUser: null,\n    isLogged: false\n  }\n\n\n\n  \n  handleSignupInputServicio = e => {\n    const { formServicio } = this.state\n    const { name, value } = e.target\n    formServicio[name] = value\n    this.setState({ formServicio })\n  }\n\n  handleSignupSubmitServicio = async e => {\n    e.preventDefault()\n    const form = this.state.formServicio\n    console.log(form)\n    this.setState({ formServicio: { description: '', direction: '', cedula: ''}})\n    \n    return await AUTH_SERVICE.CREATE(form)\n  }\n\n//----------------------------\n  handleLogout = async () => {\n    await AUTH_SERVICE.LOGOUT()\n    this.props.history.push('/')\n    this.setState({ loggedUser: null, isLogged: false })\n  }\n  //Esta función destructura de el estado la form para poder acceder a\n  //a sus key value pairs.\n  //Destructuramos la key y su valor de element y con . target lo \n  //obtenemos.\n  //A formSignUp en su llave name le damos el valor que pasa en value del\n  //e.target\n  //Se actualiza el estado al final.\n  handleSignupInput = e => {\n    const { formSignup } = this.state\n    const { name, value } = e.target\n    formSignup[name] = value\n    this.setState({ formSignup })\n  }\n  //Esta función destructura de el estado la form para poder acceder a\n  //a sus key value pairs.\n  //Destructuramos la key y su valor de element y con . target lo \n  //obtenemos.\n  //A formLogin en su llave name le damos el valor que pasa en value del\n  //e.target\n  //Se actualiza el estado al final.\n  handleLoginInput = e => {\n    const { formLogin } = this.state\n    const { name, value } = e.target\n    formLogin[name] = value\n    this.setState({ formLogin })\n  }\n  //La funcion asincrona recibe un evento; lo primero que hace es evitar la recarga \n  //de pagina con preventDefault. En seguida en una constante llamada form guardamos \n  //el state que actualizamos en la funcion handleSignUpInput. Despues limpiamos la informacion del signup\n  //para terminar pasamos nuestra constante form a AUTH_SERVICE para mandar esa info al servidor. \n  handleSignupSubmit = async e => {\n    e.preventDefault()\n    const form = this.state.formSignup\n    this.setState({ formSignup: { name: '', email: '', password: ''}})\n    return await AUTH_SERVICE.SIGNUP(form)\n  }\n\n\n//\n  handleLoginSubmit = e => {\n    e.preventDefault()\n    const form = this.state.formLogin\n    return AUTH_SERVICE.LOGIN(form)\n      .then(({ user }) => {\n        this.setState({\n          loggedUser: user,\n          isLogged: true\n        })\n        return { user, msg: 'Registro Exitoso' }\n      })\n      .catch(err => {\n        this.setState({\n          loggedUser: null,\n          isLogged: false,\n          formLogin: { email: '', password: '' }\n        })\n        return { user: null, msg: 'El usuario o contraseña son incorrectos' }\n      })\n      .finally(() => this.setState({ formLogin: { email: '', password: '' } }))\n  }\n  render() {\n    const {\n      state,\n      handleSignupInput,\n      handleSignupSubmit,\n      handleLoginInput,\n      handleLoginSubmit,\n      handleLogout,\n      handleSignupSubmitServicio,\n    handleSignupInputServicio\n    } = this\n    return (\n      <MyContext.Provider\n        value={{\n          state,\n          handleSignupInput,\n          handleSignupSubmit,\n          handleLoginInput,\n          handleLoginSubmit,\n          handleLogout,\n          handleSignupSubmitServicio,\n          handleSignupInputServicio\n      }}\n      >\n        {this.props.children}\n      </MyContext.Provider>\n    )\n  }\n}\n\nexport default withRouter(MyProvider)\n"]},"metadata":{},"sourceType":"module"}