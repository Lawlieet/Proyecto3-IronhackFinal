{"ast":null,"code":"var _jsxFileName = \"/home/juan/Escritorio/lunesfinal/Proyecto3-IronhackFinal/Proyecto Final/frontend/src/context.js\";\nimport React, { createContext, Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport AUTH_SERVICE from './services/auth'; //import { createTrabajo } from \"./services/trabajo\" \n\nimport SERVICE_TRABAJO from './services/trabajo';\nexport const MyContext = createContext();\n\nclass MyProvider extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      formServicio: {\n        title: '',\n        description: ''\n      },\n      formTrabajo: {\n        title: '',\n        description: '',\n        cedula: ''\n      },\n      formSignup: {\n        name: '',\n        email: '',\n        password: ''\n      },\n      formLogin: {\n        email: '',\n        password: ''\n      },\n      loggedUser: null,\n      isLogged: false\n    };\n\n    this.handleSignupInputTrabajo = e => {\n      const {\n        formTrabajo\n      } = this.state;\n      const {\n        name,\n        value\n      } = e.target;\n      formTrabajo[name] = value;\n      this.setState({\n        formTrabajo\n      });\n    };\n\n    this.handleSignupSubmitTrabajo = async e => {\n      e.preventDefault();\n      const form = this.state.formTrabajo;\n      console.log(form);\n      this.setState({\n        formTrabajo: {\n          title: '',\n          description: '',\n          cedula: ''\n        }\n      });\n      return await SERVICE_TRABAJO.CREATE(form);\n    };\n\n    this.handleSignupInputServicio = e => {\n      const {\n        formServicio\n      } = this.state;\n      const {\n        name,\n        value\n      } = e.target;\n      formServicio[name] = value;\n      this.setState({\n        formServicio\n      });\n    };\n\n    this.handleSignupSubmitServicio = async e => {\n      e.preventDefault();\n      const form = this.state.formServicio;\n      console.log(form);\n      this.setState({\n        formServicio: {\n          title: '',\n          direction: '',\n          cedula: ''\n        }\n      });\n      return await AUTH_SERVICE.CREATE(form);\n    };\n\n    this.handleLogout = async () => {\n      await AUTH_SERVICE.LOGOUT();\n      this.props.history.push('/');\n      this.setState({\n        loggedUser: null,\n        isLogged: false\n      });\n    };\n\n    this.handleSignupInput = e => {\n      const {\n        formSignup\n      } = this.state;\n      const {\n        name,\n        value\n      } = e.target;\n      formSignup[name] = value;\n      this.setState({\n        formSignup\n      });\n    };\n\n    this.handleLoginInput = e => {\n      const {\n        formLogin\n      } = this.state;\n      const {\n        name,\n        value\n      } = e.target;\n      formLogin[name] = value;\n      this.setState({\n        formLogin\n      });\n    };\n\n    this.handleSignupSubmit = async e => {\n      e.preventDefault();\n      const form = this.state.formSignup;\n      this.setState({\n        formSignup: {\n          name: '',\n          email: '',\n          password: ''\n        }\n      });\n      return await AUTH_SERVICE.SIGNUP(form);\n    };\n\n    this.handleLoginSubmit = e => {\n      e.preventDefault();\n      const form = this.state.formLogin;\n      return AUTH_SERVICE.LOGIN(form).then(({\n        user\n      }) => {\n        this.setState({\n          loggedUser: user,\n          isLogged: true\n        });\n        return {\n          user,\n          msg: 'Registro Exitoso'\n        };\n      }).catch(err => {\n        this.setState({\n          loggedUser: null,\n          isLogged: false,\n          formLogin: {\n            email: '',\n            password: ''\n          }\n        });\n        return {\n          user: null,\n          msg: 'El usuario o contraseÃ±a son incorrectos'\n        };\n      }).finally(() => this.setState({\n        formLogin: {\n          email: '',\n          password: ''\n        }\n      }));\n    };\n  }\n\n  render() {\n    const {\n      state,\n      handleSignupInput,\n      handleSignupSubmit,\n      handleLoginInput,\n      handleLoginSubmit,\n      handleLogout,\n      handleSignupSubmitServicio,\n      handleSignupInputServicio,\n      handleSignupInputTrabajo,\n      handleSignupSubmitTrabajo\n    } = this;\n    return React.createElement(MyContext.Provider, {\n      value: {\n        state,\n        handleSignupInput,\n        handleSignupSubmit,\n        handleLoginInput,\n        handleLoginSubmit,\n        handleLogout,\n        handleSignupSubmitServicio,\n        handleSignupInputServicio,\n        handleSignupInputTrabajo,\n        handleSignupSubmitTrabajo\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, this.props.children);\n  }\n\n}\n\nexport default withRouter(MyProvider);","map":{"version":3,"sources":["/home/juan/Escritorio/lunesfinal/Proyecto3-IronhackFinal/Proyecto Final/frontend/src/context.js"],"names":["React","createContext","Component","withRouter","AUTH_SERVICE","SERVICE_TRABAJO","MyContext","MyProvider","state","formServicio","title","description","formTrabajo","cedula","formSignup","name","email","password","formLogin","loggedUser","isLogged","handleSignupInputTrabajo","e","value","target","setState","handleSignupSubmitTrabajo","preventDefault","form","console","log","CREATE","handleSignupInputServicio","handleSignupSubmitServicio","direction","handleLogout","LOGOUT","props","history","push","handleSignupInput","handleLoginInput","handleSignupSubmit","SIGNUP","handleLoginSubmit","LOGIN","then","user","msg","catch","err","finally","render","children"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,SAA/B,QAAgD,OAAhD;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,YAAP,MAAyB,iBAAzB,C,CACA;;AACA,OAAOC,eAAP,MAA4B,oBAA5B;AAEA,OAAO,MAAMC,SAAS,GAAGL,aAAa,EAA/B;;AAEP,MAAMM,UAAN,SAAyBL,SAAzB,CAAmC;AAAA;AAAA;AAAA,SACjCM,KADiC,GACzB;AACNC,MAAAA,YAAY,EAAC;AACXC,QAAAA,KAAK,EAAC,EADK;AAEXC,QAAAA,WAAW,EAAC;AAFD,OADP;AAKNC,MAAAA,WAAW,EAAC;AACVF,QAAAA,KAAK,EAAC,EADI;AAEVC,QAAAA,WAAW,EAAC,EAFF;AAGVE,QAAAA,MAAM,EAAC;AAHG,OALN;AAUNC,MAAAA,UAAU,EAAE;AACVC,QAAAA,IAAI,EAAE,EADI;AAEVC,QAAAA,KAAK,EAAE,EAFG;AAGVC,QAAAA,QAAQ,EAAE;AAHA,OAVN;AAeNC,MAAAA,SAAS,EAAE;AACTF,QAAAA,KAAK,EAAE,EADE;AAETC,QAAAA,QAAQ,EAAE;AAFD,OAfL;AAmBNE,MAAAA,UAAU,EAAE,IAnBN;AAoBNC,MAAAA,QAAQ,EAAE;AApBJ,KADyB;;AAAA,SAyBnCC,wBAzBmC,GAyBRC,CAAC,IAAI;AAC9B,YAAM;AAAEV,QAAAA;AAAF,UAAkB,KAAKJ,KAA7B;AACA,YAAM;AAAEO,QAAAA,IAAF;AAAQQ,QAAAA;AAAR,UAAkBD,CAAC,CAACE,MAA1B;AACAZ,MAAAA,WAAW,CAACG,IAAD,CAAX,GAAoBQ,KAApB;AACA,WAAKE,QAAL,CAAc;AAAEb,QAAAA;AAAF,OAAd;AACD,KA9BkC;;AAAA,SAiCnCc,yBAjCmC,GAiCP,MAAMJ,CAAN,IAAW;AACrCA,MAAAA,CAAC,CAACK,cAAF;AACA,YAAMC,IAAI,GAAG,KAAKpB,KAAL,CAAWI,WAAxB;AACAiB,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,WAAKH,QAAL,CAAc;AAAEb,QAAAA,WAAW,EAAE;AAAEF,UAAAA,KAAK,EAAE,EAAT;AAAaC,UAAAA,WAAW,EAAE,EAA1B;AAA8BE,UAAAA,MAAM,EAAE;AAAtC;AAAf,OAAd;AAEA,aAAO,MAAMR,eAAe,CAAC0B,MAAhB,CAAuBH,IAAvB,CAAb;AACD,KAxCkC;;AAAA,SA8CjCI,yBA9CiC,GA8CLV,CAAC,IAAI;AAC/B,YAAM;AAAEb,QAAAA;AAAF,UAAmB,KAAKD,KAA9B;AACA,YAAM;AAAEO,QAAAA,IAAF;AAAQQ,QAAAA;AAAR,UAAkBD,CAAC,CAACE,MAA1B;AACAf,MAAAA,YAAY,CAACM,IAAD,CAAZ,GAAqBQ,KAArB;AACA,WAAKE,QAAL,CAAc;AAAEhB,QAAAA;AAAF,OAAd;AACD,KAnDgC;;AAAA,SAoDjCwB,0BApDiC,GAoDJ,MAAMX,CAAN,IAAW;AACtCA,MAAAA,CAAC,CAACK,cAAF;AACA,YAAMC,IAAI,GAAG,KAAKpB,KAAL,CAAWC,YAAxB;AACAoB,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,WAAKH,QAAL,CAAc;AAAEhB,QAAAA,YAAY,EAAE;AAAEC,UAAAA,KAAK,EAAE,EAAT;AAAawB,UAAAA,SAAS,EAAE,EAAxB;AAA4BrB,UAAAA,MAAM,EAAE;AAApC;AAAhB,OAAd;AAEA,aAAO,MAAMT,YAAY,CAAC2B,MAAb,CAAoBH,IAApB,CAAb;AACD,KA3DgC;;AAAA,SA8DjCO,YA9DiC,GA8DlB,YAAY;AACzB,YAAM/B,YAAY,CAACgC,MAAb,EAAN;AACA,WAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACA,WAAKd,QAAL,CAAc;AAAEN,QAAAA,UAAU,EAAE,IAAd;AAAoBC,QAAAA,QAAQ,EAAE;AAA9B,OAAd;AACD,KAlEgC;;AAAA,SA0EjCoB,iBA1EiC,GA0EblB,CAAC,IAAI;AACvB,YAAM;AAAER,QAAAA;AAAF,UAAiB,KAAKN,KAA5B;AACA,YAAM;AAAEO,QAAAA,IAAF;AAAQQ,QAAAA;AAAR,UAAkBD,CAAC,CAACE,MAA1B;AACAV,MAAAA,UAAU,CAACC,IAAD,CAAV,GAAmBQ,KAAnB;AACA,WAAKE,QAAL,CAAc;AAAEX,QAAAA;AAAF,OAAd;AACD,KA/EgC;;AAAA,SAuFjC2B,gBAvFiC,GAuFdnB,CAAC,IAAI;AACtB,YAAM;AAAEJ,QAAAA;AAAF,UAAgB,KAAKV,KAA3B;AACA,YAAM;AAAEO,QAAAA,IAAF;AAAQQ,QAAAA;AAAR,UAAkBD,CAAC,CAACE,MAA1B;AACAN,MAAAA,SAAS,CAACH,IAAD,CAAT,GAAkBQ,KAAlB;AACA,WAAKE,QAAL,CAAc;AAAEP,QAAAA;AAAF,OAAd;AACD,KA5FgC;;AAAA,SAiGjCwB,kBAjGiC,GAiGZ,MAAMpB,CAAN,IAAW;AAC9BA,MAAAA,CAAC,CAACK,cAAF;AACA,YAAMC,IAAI,GAAG,KAAKpB,KAAL,CAAWM,UAAxB;AACA,WAAKW,QAAL,CAAc;AAAEX,QAAAA,UAAU,EAAE;AAAEC,UAAAA,IAAI,EAAE,EAAR;AAAYC,UAAAA,KAAK,EAAE,EAAnB;AAAuBC,UAAAA,QAAQ,EAAE;AAAjC;AAAd,OAAd;AACA,aAAO,MAAMb,YAAY,CAACuC,MAAb,CAAoBf,IAApB,CAAb;AACD,KAtGgC;;AAAA,SA0GjCgB,iBA1GiC,GA0GbtB,CAAC,IAAI;AACvBA,MAAAA,CAAC,CAACK,cAAF;AACA,YAAMC,IAAI,GAAG,KAAKpB,KAAL,CAAWU,SAAxB;AACA,aAAOd,YAAY,CAACyC,KAAb,CAAmBjB,IAAnB,EACJkB,IADI,CACC,CAAC;AAAEC,QAAAA;AAAF,OAAD,KAAc;AAClB,aAAKtB,QAAL,CAAc;AACZN,UAAAA,UAAU,EAAE4B,IADA;AAEZ3B,UAAAA,QAAQ,EAAE;AAFE,SAAd;AAIA,eAAO;AAAE2B,UAAAA,IAAF;AAAQC,UAAAA,GAAG,EAAE;AAAb,SAAP;AACD,OAPI,EAQJC,KARI,CAQEC,GAAG,IAAI;AACZ,aAAKzB,QAAL,CAAc;AACZN,UAAAA,UAAU,EAAE,IADA;AAEZC,UAAAA,QAAQ,EAAE,KAFE;AAGZF,UAAAA,SAAS,EAAE;AAAEF,YAAAA,KAAK,EAAE,EAAT;AAAaC,YAAAA,QAAQ,EAAE;AAAvB;AAHC,SAAd;AAKA,eAAO;AAAE8B,UAAAA,IAAI,EAAE,IAAR;AAAcC,UAAAA,GAAG,EAAE;AAAnB,SAAP;AACD,OAfI,EAgBJG,OAhBI,CAgBI,MAAM,KAAK1B,QAAL,CAAc;AAAEP,QAAAA,SAAS,EAAE;AAAEF,UAAAA,KAAK,EAAE,EAAT;AAAaC,UAAAA,QAAQ,EAAE;AAAvB;AAAb,OAAd,CAhBV,CAAP;AAiBD,KA9HgC;AAAA;;AA+HjCmC,EAAAA,MAAM,GAAG;AACP,UAAM;AACJ5C,MAAAA,KADI;AAEJgC,MAAAA,iBAFI;AAGJE,MAAAA,kBAHI;AAIJD,MAAAA,gBAJI;AAKJG,MAAAA,iBALI;AAMJT,MAAAA,YANI;AAOJF,MAAAA,0BAPI;AAQJD,MAAAA,yBARI;AAUJX,MAAAA,wBAVI;AAWJK,MAAAA;AAXI,QAYF,IAZJ;AAaA,WACE,oBAAC,SAAD,CAAW,QAAX;AACE,MAAA,KAAK,EAAE;AACLlB,QAAAA,KADK;AAELgC,QAAAA,iBAFK;AAGLE,QAAAA,kBAHK;AAILD,QAAAA,gBAJK;AAKLG,QAAAA,iBALK;AAMLT,QAAAA,YANK;AAOLF,QAAAA,0BAPK;AAQLD,QAAAA,yBARK;AAULX,QAAAA,wBAVK;AAWLK,QAAAA;AAXK,OADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAiBG,KAAKW,KAAL,CAAWgB,QAjBd,CADF;AAqBD;;AAlKgC;;AAqKnC,eAAelD,UAAU,CAACI,UAAD,CAAzB","sourcesContent":["import React, { createContext, Component } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport AUTH_SERVICE from './services/auth'\n//import { createTrabajo } from \"./services/trabajo\" \nimport SERVICE_TRABAJO from './services/trabajo'\n\nexport const MyContext = createContext()\n\nclass MyProvider extends Component {\n  state = {\n    formServicio:{\n      title:'',\n      description:'',\n    }\n   ,formTrabajo:{\n      title:'',\n      description:'',\n      cedula:''\n    },\n    formSignup: {\n      name: '',\n      email: '',\n      password: ''\n    },\n    formLogin: {\n      email: '',\n      password: ''\n    },\n    loggedUser: null,\n    isLogged: false\n  }\n\n//handleSignupInputTrabajo\nhandleSignupInputTrabajo = e => {\n  const { formTrabajo } = this.state\n  const { name, value } = e.target\n  formTrabajo[name] = value\n  this.setState({ formTrabajo })\n}\n\n\nhandleSignupSubmitTrabajo = async e => {\n  e.preventDefault()\n  const form = this.state.formTrabajo\n  console.log(form)\n  this.setState({ formTrabajo: { title: '', description: '', cedula: ''}})\n  \n  return await SERVICE_TRABAJO.CREATE(form)\n}\n\n//handleSignupInputTrabajo\n\n\n//Envios de Servicios Cambiar a CrearTrabajo\n  handleSignupInputServicio = e => {\n    const { formServicio } = this.state\n    const { name, value } = e.target\n    formServicio[name] = value\n    this.setState({ formServicio })\n  }\n  handleSignupSubmitServicio = async e => {\n    e.preventDefault()\n    const form = this.state.formServicio\n    console.log(form)\n    this.setState({ formServicio: { title: '', direction: '', cedula: ''}})\n    \n    return await AUTH_SERVICE.CREATE(form)\n  }\n//Envio de Servicios cambiar a crear trabajo\n//----------------------------\n  handleLogout = async () => {\n    await AUTH_SERVICE.LOGOUT()\n    this.props.history.push('/')\n    this.setState({ loggedUser: null, isLogged: false })\n  }\n  //Esta funciÃ³n destructura de el estado la form para poder acceder a\n  //a sus key value pairs.\n  //Destructuramos la key y su valor de element y con . target lo \n  //obtenemos.\n  //A formSignUp en su llave name le damos el valor que pasa en value del\n  //e.target\n  //Se actualiza el estado al final.\n  handleSignupInput = e => {\n    const { formSignup } = this.state\n    const { name, value } = e.target\n    formSignup[name] = value\n    this.setState({ formSignup })\n  }\n  //Esta funciÃ³n destructura de el estado la form para poder acceder a\n  //a sus key value pairs.\n  //Destructuramos la key y su valor de element y con . target lo \n  //obtenemos.\n  //A formLogin en su llave name le damos el valor que pasa en value del\n  //e.target\n  //Se actualiza el estado al final.\n  handleLoginInput = e => {\n    const { formLogin } = this.state\n    const { name, value } = e.target\n    formLogin[name] = value\n    this.setState({ formLogin })\n  }\n  //La funcion asincrona recibe un evento; lo primero que hace es evitar la recarga \n  //de pagina con preventDefault. En seguida en una constante llamada form guardamos \n  //el state que actualizamos en la funcion handleSignUpInput. Despues limpiamos la informacion del signup\n  //para terminar pasamos nuestra constante form a AUTH_SERVICE para mandar esa info al servidor. \n  handleSignupSubmit = async e => {\n    e.preventDefault()\n    const form = this.state.formSignup\n    this.setState({ formSignup: { name: '', email: '', password: ''}})\n    return await AUTH_SERVICE.SIGNUP(form)\n  }\n\n\n//\n  handleLoginSubmit = e => {\n    e.preventDefault()\n    const form = this.state.formLogin\n    return AUTH_SERVICE.LOGIN(form)\n      .then(({ user }) => {\n        this.setState({\n          loggedUser: user,\n          isLogged: true\n        })\n        return { user, msg: 'Registro Exitoso' }\n      })\n      .catch(err => {\n        this.setState({\n          loggedUser: null,\n          isLogged: false,\n          formLogin: { email: '', password: '' }\n        })\n        return { user: null, msg: 'El usuario o contraseÃ±a son incorrectos' }\n      })\n      .finally(() => this.setState({ formLogin: { email: '', password: '' } }))\n  }\n  render() {\n    const {\n      state,\n      handleSignupInput,\n      handleSignupSubmit,\n      handleLoginInput,\n      handleLoginSubmit,\n      handleLogout,\n      handleSignupSubmitServicio,\n      handleSignupInputServicio,\n      \n      handleSignupInputTrabajo,\n      handleSignupSubmitTrabajo\n    } = this\n    return (\n      <MyContext.Provider\n        value={{\n          state,\n          handleSignupInput,\n          handleSignupSubmit,\n          handleLoginInput,\n          handleLoginSubmit,\n          handleLogout,\n          handleSignupSubmitServicio,\n          handleSignupInputServicio,\n          \n          handleSignupInputTrabajo,\n          handleSignupSubmitTrabajo\n\n\n      }}\n      >\n        {this.props.children}\n      </MyContext.Provider>\n    )\n  }\n}\n\nexport default withRouter(MyProvider)\n"]},"metadata":{},"sourceType":"module"}