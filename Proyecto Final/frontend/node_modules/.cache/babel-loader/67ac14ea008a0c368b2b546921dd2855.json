{"ast":null,"code":"var _jsxFileName = \"/home/juan/Escritorio/lunesfinal/Proyecto3-IronhackFinal/Proyecto Final/frontend/src/context.js\";\nimport React, { createContext, Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport AUTH_SERVICE from './services/auth'; //import { createTrabajo } from \"./services/trabajo\" \n\nimport SERVICE_TRABAJO from './services/trabajo';\nexport const MyContext = createContext();\n\nclass MyProvider extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      formServicio: {\n        title: '',\n        description: ''\n      },\n      formTrabajo: {\n        title: '',\n        description: '',\n        cedula: ''\n      },\n      formSignup: {\n        name: '',\n        email: '',\n        password: ''\n      },\n      formLogin: {\n        email: '',\n        password: ''\n      },\n      loggedUser: null,\n      isLogged: false\n    };\n\n    this.handleSignupInputTrabajo = e => {\n      const {\n        formTrabajo\n      } = this.state;\n      const {\n        name,\n        value\n      } = e.target;\n      formTrabajo[name] = value;\n      this.setState({\n        formTrabajo\n      });\n    };\n\n    this.handleSignupSubmitTrabajo = async e => {\n      e.preventDefault();\n      const form = this.state.formTrabajo;\n      console.log(form);\n      this.setState({\n        formTrabajo: {\n          title: '',\n          description: '',\n          cedula: ''\n        }\n      });\n      return await SERVICE_TRABAJO.CREATE(form);\n    };\n\n    this.handleSignupInputServicio = e => {\n      const {\n        formServicio\n      } = this.state;\n      const {\n        name,\n        value\n      } = e.target;\n      formServicio[name] = value;\n      this.setState({\n        formServicio\n      });\n    };\n\n    this.handleSignupSubmitServicio = async e => {\n      e.preventDefault();\n      const form = this.state.formServicio;\n      console.log(form);\n      this.setState({\n        formServicio: {\n          title: '',\n          description: ''\n        }\n      });\n      return await AUTH_SERVICE.CREATE(form);\n    };\n\n    this.handleLogout = async () => {\n      await AUTH_SERVICE.LOGOUT();\n      this.props.history.push('/');\n      this.setState({\n        loggedUser: null,\n        isLogged: false\n      });\n    };\n\n    this.handleSignupInput = e => {\n      const {\n        formSignup\n      } = this.state;\n      const {\n        name,\n        value\n      } = e.target;\n      formSignup[name] = value;\n      this.setState({\n        formSignup\n      });\n    };\n\n    this.handleLoginInput = e => {\n      const {\n        formLogin\n      } = this.state;\n      const {\n        name,\n        value\n      } = e.target;\n      formLogin[name] = value;\n      this.setState({\n        formLogin\n      });\n    };\n\n    this.handleSignupSubmit = async e => {\n      e.preventDefault();\n      const form = this.state.formSignup;\n      this.setState({\n        formSignup: {\n          name: '',\n          email: '',\n          password: ''\n        }\n      });\n      return await AUTH_SERVICE.SIGNUP(form);\n    };\n\n    this.uploadPhoto = e => {\n      const formPhoto = new FormData();\n      formPhoto.append('photoURL', e.target.files[0]);\n      AUTH_SERVICE.uploadPhoto(formPhoto).then(({\n        data\n      }) => {\n        this.setState({\n          loggedUser: data.user\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.handleLoginSubmit = e => {\n      e.preventDefault();\n      const form = this.state.formLogin;\n      return AUTH_SERVICE.LOGIN(form).then(({\n        user\n      }) => {\n        this.setState({\n          loggedUser: user,\n          isLogged: true\n        });\n        return {\n          user,\n          msg: 'Registro Exitoso'\n        };\n      }).catch(err => {\n        this.setState({\n          loggedUser: null,\n          isLogged: false,\n          formLogin: {\n            email: '',\n            password: ''\n          }\n        });\n        return {\n          user: null,\n          msg: 'El usuario o contraseÃ±a son incorrectos'\n        };\n      }).finally(() => this.setState({\n        formLogin: {\n          email: '',\n          password: ''\n        }\n      }));\n    };\n  }\n\n  render() {\n    const {\n      state,\n      handleSignupInput,\n      handleSignupSubmit,\n      handleLoginInput,\n      handleLoginSubmit,\n      handleLogout,\n      handleSignupSubmitServicio,\n      handleSignupInputServicio,\n      uploadPhoto,\n      handleSignupInputTrabajo,\n      handleSignupSubmitTrabajo\n    } = this;\n    return React.createElement(MyContext.Provider, {\n      value: {\n        state,\n        handleSignupInput,\n        handleSignupSubmit,\n        handleLoginInput,\n        handleLoginSubmit,\n        handleLogout,\n        handleSignupSubmitServicio,\n        handleSignupInputServicio,\n        uploadPhoto,\n        handleSignupInputTrabajo,\n        handleSignupSubmitTrabajo\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, this.props.children);\n  }\n\n}\n\nexport default withRouter(MyProvider);","map":{"version":3,"sources":["/home/juan/Escritorio/lunesfinal/Proyecto3-IronhackFinal/Proyecto Final/frontend/src/context.js"],"names":["React","createContext","Component","withRouter","AUTH_SERVICE","SERVICE_TRABAJO","MyContext","MyProvider","state","formServicio","title","description","formTrabajo","cedula","formSignup","name","email","password","formLogin","loggedUser","isLogged","handleSignupInputTrabajo","e","value","target","setState","handleSignupSubmitTrabajo","preventDefault","form","console","log","CREATE","handleSignupInputServicio","handleSignupSubmitServicio","handleLogout","LOGOUT","props","history","push","handleSignupInput","handleLoginInput","handleSignupSubmit","SIGNUP","uploadPhoto","formPhoto","FormData","append","files","then","data","user","catch","err","handleLoginSubmit","LOGIN","msg","finally","render","children"],"mappings":"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","sourcesContent":["import React, { createContext, Component } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport AUTH_SERVICE from './services/auth'\n//import { createTrabajo } from \"./services/trabajo\" \nimport SERVICE_TRABAJO from './services/trabajo'\n\nexport const MyContext = createContext()\n\nclass MyProvider extends Component {\n  state = {\n    formServicio:{\n      title:'',\n      description:'',\n    }\n   ,formTrabajo:{\n      title:'',\n      description:'',\n      cedula:''\n    },\n    formSignup: {\n      name: '',\n      email: '',\n      password: ''\n    },\n    formLogin: {\n      email: '',\n      password: ''\n    },\n    \n    loggedUser: null,\n    isLogged: false\n  }\n\n//handleSignupInputTrabajo\nhandleSignupInputTrabajo = e => {\n  const { formTrabajo } = this.state\n  const { name, value } = e.target\n  formTrabajo[name] = value\n  this.setState({ formTrabajo })\n}\n\n\nhandleSignupSubmitTrabajo = async e => {\n  e.preventDefault()\n  const form = this.state.formTrabajo\n  console.log(form)\n  this.setState({ formTrabajo: { title: '', description: '', cedula: ''}})\n  \n  return await SERVICE_TRABAJO.CREATE(form)\n}\n\n//handleSignupInputTrabajo\n\n\n//Envios de Servicios Cambiar a CrearTrabajo\n  handleSignupInputServicio = e => {\n    const { formServicio } = this.state\n    const { name, value } = e.target\n    formServicio[name] = value\n    this.setState({ formServicio })\n  }\n  handleSignupSubmitServicio = async e => {\n    e.preventDefault()\n    const form = this.state.formServicio\n    console.log(form)\n    this.setState({ formServicio: { title: '', description: ''}})\n    \n    return await AUTH_SERVICE.CREATE(form)\n  }\n//Envio de Servicios cambiar a crear trabajo\n//----------------------------\n  handleLogout = async () => {\n    await AUTH_SERVICE.LOGOUT()\n    this.props.history.push('/')\n    this.setState({ loggedUser: null, isLogged: false })\n  }\n  //Esta funciÃ³n destructura de el estado la form para poder acceder a\n  //a sus key value pairs.\n  //Destructuramos la key y su valor de element y con . target lo \n  //obtenemos.\n  //A formSignUp en su llave name le damos el valor que pasa en value del\n  //e.target\n  //Se actualiza el estado al final.\n  handleSignupInput = e => {\n    const { formSignup } = this.state\n    const { name, value } = e.target\n    formSignup[name] = value\n    this.setState({ formSignup })\n  }\n  //Esta funciÃ³n destructura de el estado la form para poder acceder a\n  //a sus key value pairs.\n  //Destructuramos la key y su valor de element y con . target lo \n  //obtenemos.\n  //A formLogin en su llave name le damos el valor que pasa en value del\n  //e.target\n  //Se actualiza el estado al final.\n  handleLoginInput = e => {\n    const { formLogin } = this.state\n    const { name, value } = e.target\n    formLogin[name] = value\n    this.setState({ formLogin })\n  }\n  //La funcion asincrona recibe un evento; lo primero que hace es evitar la recarga \n  //de pagina con preventDefault. En seguida en una constante llamada form guardamos \n  //el state que actualizamos en la funcion handleSignUpInput. Despues limpiamos la informacion del signup\n  //para terminar pasamos nuestra constante form a AUTH_SERVICE para mandar esa info al servidor. \n  handleSignupSubmit = async e => {\n    e.preventDefault()\n    const form = this.state.formSignup\n    this.setState({ formSignup: { name: '', email: '', password: ''}})\n    return await AUTH_SERVICE.SIGNUP(form)\n  }\n//Cambiar foto de perfil//\n\nuploadPhoto = e => {\n  const formPhoto = new FormData()\n  formPhoto.append('photoURL', e.target.files[0])\n  AUTH_SERVICE.uploadPhoto(formPhoto)\n    .then(({ data }) => {\n      this.setState({ loggedUser: data.user })\n    })\n    .catch(err => {\n      console.log(err)\n    })\n}\n\n\n\n//Fin Cambiar Foto de Perfil\n\n\n\n\n\n//\n  handleLoginSubmit = e => {\n    e.preventDefault()\n    const form = this.state.formLogin\n    return AUTH_SERVICE.LOGIN(form)\n      .then(({ user }) => {\n        this.setState({\n          loggedUser: user,\n          isLogged: true\n        })\n        return { user, msg: 'Registro Exitoso' }\n      })\n      .catch(err => {\n        this.setState({\n          loggedUser: null,\n          isLogged: false,\n          formLogin: { email: '', password: '' }\n        })\n        return { user: null, msg: 'El usuario o contraseÃ±a son incorrectos' }\n      })\n      .finally(() => this.setState({ formLogin: { email: '', password: '' } }))\n  }\n  render() {\n    const {\n      state,\n      handleSignupInput,\n      handleSignupSubmit,\n      handleLoginInput,\n      handleLoginSubmit,\n      handleLogout,\n      handleSignupSubmitServicio,\n      handleSignupInputServicio,\n      uploadPhoto,\n      handleSignupInputTrabajo,\n      handleSignupSubmitTrabajo\n    } = this\n    return (\n      <MyContext.Provider\n        value={{\n          state,\n          handleSignupInput,\n          handleSignupSubmit,\n          handleLoginInput,\n          handleLoginSubmit,\n          handleLogout,\n          handleSignupSubmitServicio,\n          handleSignupInputServicio,\n          uploadPhoto,\n          handleSignupInputTrabajo,\n          handleSignupSubmitTrabajo\n\n\n      }}\n      >\n        {this.props.children}\n      </MyContext.Provider>\n    )\n  }\n}\n\nexport default withRouter(MyProvider)\n"]},"metadata":{},"sourceType":"module"}